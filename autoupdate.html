<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
</head>
<body>
<script>
  // autoupdate behavior: fetch singlefile and replace document
  (async function() {
    try {
      const r = await fetch('https://cdn.jsdelivr.net/gh/chistorrita/im-chistorrita@main/singlefile.html?t=' + Date.now());
      const html = await r.text();
      document.documentElement.innerHTML = html;
      // re-run inline scripts
      document.documentElement.querySelectorAll('script').forEach(s => {
        const ns = document.createElement('script');
        if (s.src) ns.src = s.src; else ns.textContent = s.textContent;
        document.body.appendChild(ns);
      });
    } catch(e) {
      console.error('autoupdate failed', e);
    }
  })();
</script>
</body>
</html>
